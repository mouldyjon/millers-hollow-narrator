# Publishing to GitHub Pages

This document explains how to publish the Miller's Hollow Narrator PWA to GitHub Pages.

## ğŸ“‹ Prerequisites

- Git repository initialised and committed
- GitHub account
- Repository pushed to GitHub

---

## ğŸš€ Initial Setup (One-Time)

### 1. Configure GitHub Pages

1. Go to your GitHub repository: `https://github.com/yourusername/millers-hollow-narrator`
2. Click **Settings** (top navigation)
3. Click **Pages** (left sidebar under "Code and automation")
4. Under **Source**, select **GitHub Actions**
5. Click **Save**

That's it! GitHub Pages is now configured to deploy automatically.

---

## ğŸ“¤ Publishing Updates

Every time you push to the `main` branch, the app automatically deploys.

### Standard Workflow

```bash
# 1. Make your changes
git add .
git commit -m "feat: your changes description"

# 2. Push to GitHub
git push origin main

# 3. Wait 1-2 minutes for deployment
# Visit the Actions tab to watch progress
```

### Monitor Deployment

1. Go to the **Actions** tab in your GitHub repository
2. Click on the latest workflow run
3. Watch the **build** and **deploy** steps
4. Once complete (green checkmark âœ“), your changes are live

---

## ğŸŒ Accessing Your App

### Live URL

Your app is published at:
```
https://yourusername.github.io/millers-hollow-narrator/
```

Replace `yourusername` with your actual GitHub username.

### First-Time Access

1. Open the URL in your browser
2. The app should load immediately
3. Try refreshing to ensure it works offline (PWA)

---

## ğŸ“± Installing on Mobile Devices

### Android (Chrome)

1. Open the app URL in Chrome
2. Tap the menu (â‹®) in the top-right
3. Tap **"Add to Home screen"** or **"Install app"**
4. Confirm installation
5. The app icon appears on your home screen
6. Launch like any native app

### iOS (Safari)

1. Open the app URL in Safari
2. Tap the Share button (box with arrow)
3. Scroll and tap **"Add to Home Screen"**
4. Tap **"Add"**
5. The app icon appears on your home screen

### Desktop (Chrome, Edge, Brave)

1. Open the app URL
2. Look for the install icon (âŠ•) in the address bar
3. Click **"Install"**
4. The app opens in its own window

---

## ğŸ”§ Technical Details

### Build Configuration

The app is configured for GitHub Pages in `vite.config.ts`:

```typescript
export default defineConfig({
  base: '/millers-hollow-narrator/', // GitHub Pages base path
  plugins: [
    react(),
    VitePWA({
      // PWA configuration
    })
  ],
})
```

### Deployment Workflow

The GitHub Action (`.github/workflows/deploy.yml`) automatically:

1. Checks out the code
2. Installs dependencies (`npm ci`)
3. Builds the production bundle (`npm run build`)
4. Deploys to GitHub Pages

### PWA Features

Once installed, the app:

- âœ… Works completely offline
- âœ… Updates automatically when online
- âœ… Saves game state to localStorage
- âœ… Feels like a native app
- âœ… Can be added to home screen

---

## ğŸ› Troubleshooting

### Deployment Failed

**Check the Actions tab for error details:**

1. Go to **Actions** tab
2. Click the failed workflow
3. Expand the failed step
4. Read the error message

**Common Issues:**

- **Build errors**: Fix TypeScript/ESLint errors locally first
- **Missing dependencies**: Run `npm install` locally to update `package-lock.json`
- **Permission errors**: Check repository settings â†’ Actions â†’ General â†’ Workflow permissions

### App Not Updating

**Clear cache and hard refresh:**

- **Desktop**: Ctrl+Shift+R (Windows/Linux) or Cmd+Shift+R (Mac)
- **Mobile**: Clear browser cache in settings

**Service worker stuck:**

1. Open DevTools (F12)
2. Go to **Application** tab
3. Click **Service Workers**
4. Click **Unregister**
5. Refresh the page

### 404 Errors

**Check base path configuration:**

Ensure `vite.config.ts` has:
```typescript
base: '/millers-hollow-narrator/'
```

This must match your repository name.

### PWA Not Installing

**Requirements for PWA installation:**

- âœ… HTTPS (GitHub Pages provides this automatically)
- âœ… Valid manifest.json (generated by vite-plugin-pwa)
- âœ… Service worker (generated automatically)
- âœ… Icons in public/ folder (icon-192x192.png and icon-512x512.png) âœ…

**All requirements met!** The app should install as a PWA on supported browsers.

---

## ğŸ”„ Rolling Back to Previous Version

If you need to revert to a previous version:

### Option 1: Revert Git Commit

```bash
# Find the commit hash you want to revert to
git log --oneline

# Revert to that commit
git revert <commit-hash>

# Push to trigger new deployment
git push origin main
```

### Option 2: Deploy Specific Commit

1. Go to **Actions** tab
2. Click **Deploy to GitHub Pages** workflow
3. Click **Run workflow**
4. Select the branch/tag you want to deploy
5. Click **Run workflow**

---

## ğŸ“Š Monitoring Usage

### GitHub Pages Analytics

GitHub Pages doesn't provide built-in analytics. To track usage:

**Option 1: Add Google Analytics** (free)
- Add tracking code to `index.html`
- View stats in Google Analytics dashboard

**Option 2: Cloudflare Analytics** (free, privacy-friendly)
- Transfer domain to Cloudflare
- Enable analytics in dashboard

**Option 3: Simple Analytics** (paid, privacy-focused)
- Add tracking script
- GDPR compliant

---

## ğŸ’° Costs

GitHub Pages is **100% free** for public repositories:

- âœ… Unlimited bandwidth
- âœ… Automatic HTTPS
- âœ… Custom domain support (optional)
- âœ… No credit card required

**Optional Costs:**

- Custom domain: Â£10-15/year (e.g., millershollow.com)
- Nothing else required!

---

## ğŸ” Security Best Practices

### Keep Dependencies Updated

```bash
# Check for outdated packages
npm outdated

# Update all dependencies
npm update

# Update major versions (carefully)
npm install <package>@latest
```

### Monitor for Vulnerabilities

```bash
# Check for security issues
npm audit

# Fix automatically (if possible)
npm audit fix
```

### Branch Protection (Optional)

For team projects, protect the `main` branch:

1. Settings â†’ Branches
2. Add rule for `main`
3. Require pull request reviews
4. Require status checks to pass

---

## ğŸ¯ Next Steps

### Recommended Enhancements

1. **Custom Domain** (optional)
   - Purchase domain (Â£10-15/year)
   - Configure in Settings â†’ Pages
   - Add CNAME record in DNS

3. **Enable Analytics** (optional)
   - Track usage and errors
   - Improve based on real user data

4. **Add Changelog**
   - Document version changes
   - Help users track updates

---

## ğŸ“ Support

### Useful Links

- **GitHub Pages Docs**: https://docs.github.com/en/pages
- **Vite Deployment Guide**: https://vitejs.dev/guide/static-deploy.html
- **PWA Checklist**: https://web.dev/pwa-checklist/

### Common Questions

**Q: How often does it deploy?**  
A: Every push to `main` triggers automatic deployment (1-2 minutes).

**Q: Can I deploy from other branches?**  
A: Yes, modify `.github/workflows/deploy.yml` to trigger on other branches.

**Q: Is there a deployment limit?**  
A: No, unlimited deployments on the free tier.

**Q: Can I password-protect it?**  
A: Not directly with GitHub Pages. Consider Netlify (free tier) for password protection.

**Q: Can I use a custom domain?**  
A: Yes! Configure in Settings â†’ Pages â†’ Custom domain.

---

## âœ… Deployment Checklist

Before publishing:

- [ ] All features tested locally
- [ ] Build succeeds (`npm run build`)
- [ ] No TypeScript errors
- [ ] No console errors in browser
- [ ] PWA works offline
- [ ] Game state persists on refresh
- [ ] Tested on mobile device
- [ ] Icons added (for full PWA support)
- [ ] README updated
- [ ] Changelog updated

After publishing:

- [ ] Visit live URL
- [ ] Test on multiple devices
- [ ] Install as PWA on phone
- [ ] Share URL with others
- [ ] Monitor Actions tab for issues

---

**Last Updated:** 2025-11-21  
**Version:** 1.0.0
